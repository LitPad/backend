<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Logs</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f7f8fa;
            margin: 0;
            padding: 0;
        }

        .container {
            max-width: 1200px;
            margin: 50px auto;
            padding: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        @media (max-width: 1253px) {
            .container {
                margin: 20px 20px;
            }
        }

        h1 {
            text-align: center;
            margin-bottom: 20px;
        }

        .filters {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .filters input, .filters select {
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            flex: 1;
            min-width: 150px;
        }

        .filters button {
            background-color: #007bff;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        .filters button:hover {
            background-color: #0056b3;
        }

        .table-wrapper {
            overflow-x: auto; /* Enable horizontal scrolling for the table */
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        table th, table td {
            padding: 12px 15px;
            text-align: left;
            border: 1px solid #ddd;
        }

        table th {
            background-color: #f4f4f4;
        }

        table tr:nth-child(even) {
            background-color: #f9f9f9;
        }

        .no-data {
            text-align: center;
            padding: 20px;
            color: #777;
        }

        @media (max-width: 768px) {
            .filters {
                gap: 10px;
            }
            .filters input, .filters select, .filters button {
                padding: 8px;
            }
        }

        @media (max-width: 480px) {
            h1 {
                font-size: 18px; /* Reduce title size for smaller screens */
            }

            .filters {
                flex-direction: column; /* Stack filters vertically */
                gap: 15px;
            }

            .filters button {
                width: 100%; /* Make button full width */
            }

            table th, table td {
                font-size: 12px; /* Adjust font size for table */
                padding: 8px; /* Reduce padding */
            }
        }

        /* Toast Styles */
        .toast-container {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 9999;
        }

        .toast {
            background-color: #333;
            color: white;
            padding: 10px 20px;
            margin-bottom: 10px;
            border-radius: 5px;
            display: none;
            font-size: 14px;
            animation: fadeInOut 4s ease-in-out;
        }

        .toast.success {
            background-color: #4caf50;
        }

        .toast.error {
            background-color: #f44336;
        }

        @keyframes fadeInOut {
            0% {
                opacity: 0;
                transform: translateY(10px);
            }
            10% {
                opacity: 1;
                transform: translateY(0);
            }
            90% {
                opacity: 1;
                transform: translateY(0);
            }
            100% {
                opacity: 0;
                transform: translateY(10px);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>LitPad Request Logs</h1>

        <!-- Filters -->
        <form class="filters" method="GET" action="/logs">
            <input type="datetime-local" name="start_time" placeholder="Start Time">
            <input type="datetime-local" name="end_time" placeholder="End Time">
            <select name="method">
                <option value="">All Methods</option>
                <option value="GET">GET</option>
                <option value="POST">POST</option>
                <option value="PUT">PUT</option>
                <option value="PATCH">PATCH</option>
                <option value="DELETE">DELETE</option>
            </select>
            <input type="text" name="path" placeholder="Endpoint Path">
            <button type="submit">Filter</button>
        </form>

        <!-- Logs Table -->
        <div class="table-wrapper">
            <table>
                <thead>
                    <tr>
                        <th>Method</th>
                        <th>Path</th>
                        <th>Status</th>
                        <th>IP</th>
                        <th>Params</th>
                        <th>Body</th>
                        <th>Time</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Loop through logs -->
                    {{range .Logs}}
                        <tr>
                            <td>{{.Method}}</td>
                            <td>{{.Path}}</td>
                            <td>{{.StatusCode}}</td>
                            <td>{{.IP}}</td>
                            <td>{{.Params}}</td>
                            <td>{{.Body}}</td>
                            <td>{{.CreatedAt}}</td>
                        </tr>
                    {{else}}
                        <tr>
                            <td colspan="7" style="text-align: center; color: blue; font-weight: bold; font-size: 15px;">No logs found yet!</td>
                        </tr>
                    {{end}}
                </tbody>
            </table>
        </div>

        <!-- No Data Message -->
        <div class="no-data" style="display: none;">No logs found for the selected filters.</div>
    </div>

    <!-- Toasts -->
    <div class="toast-container" id="toastContainer"></div>

    <script>
        // Function to show toast messages
        function showToast(message) {
            const toastContainer = document.getElementById('toastContainer');
            const toast = document.createElement('div');
            toast.classList.add('toast');
            toast.classList.add("success");
            toast.textContent = message;

            toastContainer.appendChild(toast);

            // Display the toast
            toast.style.display = 'block';

            // Remove toast after animation
            setTimeout(() => {
                toast.style.display = 'none';
                toastContainer.removeChild(toast);
            }, 4000);
        }

        // Simulate a failed login for demonstration
        window.onload = function() {
            var message = "{{.success}}";
            if (message !== "<no value>") {
                showToast(message);
            }
        };
    </script>
</body>
</html>
